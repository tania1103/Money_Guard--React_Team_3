"use strict";(self.webpackChunkmoney_guard=self.webpackChunkmoney_guard||[]).push([[428],{4428:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});var a=r(8899),s=r(579);const n=()=>(0,s.jsx)(a.A,{})},8899:(e,t,r)=>{r.d(t,{A:()=>j});var a=r(5043),s=r(8387),n=r(108),c=r(2417),l=r(3839),o=r(1519),i=r(6150);const d={wrapper:"Currency_wrapper__dkN2w",graph:"Currency_graph__tDdJm",tab:"Currency_tab__fYB-2",header:"Currency_header__Mo0it",item:"Currency_item__ECTkD"};var u=r(579);const f=e=>{let{data:t}=e;const r=e=>{let{active:t,payload:r}=e;return t&&r&&r.length,null};return(0,u.jsx)("div",{className:d.graph,children:(0,u.jsx)(n.u,{width:"100%",height:"100%",children:(0,u.jsxs)(c.Q,{data:t,className:"custom-chart",children:[(0,u.jsx)("defs",{children:(0,u.jsxs)("linearGradient",{id:"colorGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,u.jsx)("stop",{offset:"0%",stopColor:"#ffffff",stopOpacity:.3}),(0,u.jsx)("stop",{offset:"100%",stopColor:"#ffffff",stopOpacity:0})]})}),(0,u.jsx)(l.G,{type:"monotone",dataKey:"currency",stroke:"none",fill:"url(#colorGradient)",fillOpacity:1,transform:"translate(0, 10)",activeDot:!1,dot:!1}),(0,u.jsx)(l.G,{type:"monotone",dataKey:"currency",stroke:"#ff6f61",strokeWidth:2,fill:"none",activeDot:e=>{const{cx:r,cy:a,index:s}=e,n=t[s].name;return"USD"===n||"EURO"===n?(0,u.jsx)("circle",{cx:r,cy:a,r:5,fill:"#ff6f61",stroke:"#fff",strokeWidth:2}):null},dot:e=>{const{cx:r,cy:a,index:s}=e,n=t[s].name;return"USD"===n||"EURO"===n?(0,u.jsx)("circle",{cx:r,cy:a,r:4,fill:"#563EAF",stroke:"#ff6f61",strokeWidth:2},`dot-${s}`):null},children:(0,u.jsx)(o.Z,{dataKey:"label",content:e=>{const{x:r,y:a,value:s,index:n}=e;let c=null;return"USD"===t[n].name?c="$":"EURO"===t[n].name&&(c="\u20ac"),(0,u.jsx)("text",{x:r,y:a-10,fill:"#ff6f61",fontSize:14,textAnchor:"middle",children:c?`${c} ${s}`:s})},position:"top",offset:10,fill:"#ff6f61",fontSize:12})}),(0,u.jsx)(i.m,{content:(0,u.jsx)(r,{}),cursor:{stroke:"none"},allowEscapeViewBox:{x:!0,y:!0}})]})})})};var h=r(6213);const m="currencyRates",x=async()=>{try{return(await h.A.get("https://openexchangerates.org/api/latest.json?app_id=b70a6b3522db4135949be5b7b0660667&base=RON")).data.rates}catch(e){throw new Error("Failed to fetch data from Open Exchange Rates: "+e.message)}},y=e=>{const t={timestamp:Date.now(),usdRate:e.USD?{rateBuy:e.USD.toFixed(2),rateSell:(1.02*e.USD).toFixed(2)}:null,euroRate:e.EUR?{rateBuy:e.EUR.toFixed(2),rateSell:(1.02*e.EUR).toFixed(2)}:null};return localStorage.setItem(m,JSON.stringify(t)),t},p=async()=>{let e=(()=>{const e=JSON.parse(localStorage.getItem(m));return e&&Date.now()-e.timestamp<36e5?e:null})();if(e&&e.usdRate&&e.euroRate)return e;try{const t=await x();if(e=y(t),!e.usdRate||!e.euroRate)throw new Error("Incomplete data fetched from API")}catch(t){console.error("Error fetching data from API. Retrying...",t.message);const r=await x();e=y(r)}if(!e.usdRate||!e.euroRate)throw new Error("Failed to fetch valid currency data");return e},j=()=>{const[e,t]=(0,a.useState)({rateBuy:0,rateSell:0}),[r,n]=(0,a.useState)({rateBuy:0,rateSell:0});(0,a.useEffect)((()=>{(async()=>{try{const e=await p();e.usdRate&&t(e.usdRate),e.euroRate&&n(e.euroRate)}catch(e){throw new Error(e.message)}})()}),[]);const c=[{name:"start",currency:8,label:""},{name:"USD",currency:e.rateBuy,label:e.rateBuy},{name:"middle",currency:10,label:""},{name:"EURO",currency:r.rateBuy,label:r.rateBuy},{name:"end",currency:25,label:""}];return(0,u.jsxs)("div",{className:d.wrapper,children:[(0,u.jsxs)("table",{className:d.tab,children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{className:(0,s.A)(d.tr,d.header),children:[(0,u.jsx)("th",{className:d.item,children:"Currency"}),(0,u.jsx)("th",{className:d.item,children:"Purchase"}),(0,u.jsx)("th",{className:d.item,children:"Sale"})]})}),(0,u.jsxs)("tbody",{children:[(0,u.jsxs)("tr",{className:d.tr,children:[(0,u.jsx)("td",{className:d.item,children:"USD"}),(0,u.jsx)("td",{className:d.item,children:e.rateBuy}),(0,u.jsx)("td",{className:d.item,children:e.rateSell})]}),(0,u.jsxs)("tr",{className:d.tr,children:[(0,u.jsx)("td",{className:d.item,children:"EUR"}),(0,u.jsx)("td",{className:d.item,children:r.rateBuy}),(0,u.jsx)("td",{className:d.item,children:r.rateSell})]})]})]}),(0,u.jsx)(f,{data:c})]})}}}]);
//# sourceMappingURL=428.1e878d09.chunk.js.map